{"version":3,"sources":["config/view_helpers.js"],"names":["module","exports","appConfig","light","config","log","m","debug","getFieldErrMsg","errors","param","errObj","_","findWhere","msg","result","http","getReq","_req","session","get","key","getFlash","flash","undefined","Error"],"mappings":";;AAAA;;;;AAIAA,OAAOC,OAAP,GAAiB;;AAEhB;AACAC,YAAW,qBAAW;AACrB,SAAOC,MAAMC,MAAb;AACA,EALe;;AAOhB;AACAC,MAAK,aAASC,CAAT,EAAW;AACfH,QAAME,GAAN,CAAUE,KAAV,CAAgBD,CAAhB;AACA,EAVe;;AAYhB;AACA;AACAE,iBAAgB,wBAASC,MAAT,EAAiBC,KAAjB,EAAwB;AACvC,MAAIC,SAASC,EAAEC,SAAF,CAAYJ,MAAZ,EAAoB,EAAE,SAASC,KAAX,EAApB,CAAb;AACA,MAAII,MAAMF,EAAEG,MAAF,CAASJ,MAAT,EAAiB,KAAjB,CAAV;AACA,SAAQG,GAAD,GAAQA,GAAR,GAAc,EAArB;AACA,EAlBe;;AAoBhB;AACAE,OAAM;AACLC,UAAQ,kBAAW;AAClB,UAAOd,MAAMe,IAAb;AACA;AAHI,EArBU;;AA2BhB;AACAC,UAAS;;AAER;AACAC,OAAK,aAASC,GAAT,EAAc;AAClB,UAAOlB,MAAMe,IAAN,CAAWC,OAAX,CAAmBE,GAAnB,CAAP;AACA,GALO;;AAOR;AACAC,YAAU,kBAASD,GAAT,EAAc;AACvB,OAAIlB,MAAMe,IAAN,CAAWK,KAAX,IAAoBC,SAAxB,EAAmC,MAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AACnC,UAAOtB,MAAMe,IAAN,CAAWK,KAAX,CAAiBF,GAAjB,CAAP;AACA;AAXO;AA5BO,CAAjB","file":"view_helpers.js","sourcesContent":["/**\n * View helper functions\n */\n\nmodule.exports = {\n\t\n\t// expose app config to view\n\tappConfig: function() {\n\t\treturn light.config\n\t},\n\n\t// log debug message\n\tlog: function(m){\n\t\tlight.log.debug(m)\n\t},\n\n\t// extracts the first error message from form validation error object using its parameter name\n\t// example error object: [ { param: 'email', msg: 'Please provide your email.', value: '' } ]\n\tgetFieldErrMsg: function(errors, param) {\n\t\tvar errObj = _.findWhere(errors, { 'param': param });\n\t\tvar msg = _.result(errObj, 'msg');\n\t\treturn (msg) ? msg : '';\n\t},\n\n\t// http helper\n\thttp: {\n\t\tgetReq: function() {\n\t\t\treturn light._req;\n\t\t}\n\t},\n\n\t// session helper (only read-only access)\n\tsession: {\n\t\t\n\t\t// get session data by key\n\t\tget: function(key) {\n\t\t\treturn light._req.session[key];\n\t\t},\n\n\t\t// get flash data by key\n\t\tgetFlash: function(key) {\n\t\t\tif (light._req.flash == undefined) throw new Error(\"flash module not installed\");\n\t\t\treturn light._req.flash(key)\n\t\t}\n\t}\n}"]}