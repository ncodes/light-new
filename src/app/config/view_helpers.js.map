{"version":3,"sources":["config/view_helpers.js"],"names":[],"mappings":";;;;;;AAIA,OAAO,OAAP,GAAiB;;;AAGhB,YAAW,qBAAW;AACrB,SAAO,MAAM,MAAb;AACA,EALe;;;AAQhB,MAAK,aAAS,CAAT,EAAW;AACf,QAAM,GAAN,CAAU,KAAV,CAAgB,CAAhB;AACA,EAVe;;;;AAchB,iBAAgB,wBAAS,MAAT,EAAiB,KAAjB,EAAwB;AACvC,MAAI,SAAS,EAAE,SAAF,CAAY,MAAZ,EAAoB,EAAE,SAAS,KAAX,EAApB,CAAb;AACA,MAAI,MAAM,EAAE,MAAF,CAAS,MAAT,EAAiB,KAAjB,CAAV;AACA,SAAQ,GAAD,GAAQ,GAAR,GAAc,EAArB;AACA,EAlBe;;;AAqBhB,OAAM;AACL,UAAQ,kBAAW;AAClB,UAAO,MAAM,IAAb;AACA;AAHI,EArBU;;;AA4BhB,UAAS;;;AAGR,OAAK,aAAS,GAAT,EAAc;AAClB,UAAO,MAAM,IAAN,CAAW,OAAX,CAAmB,GAAnB,CAAP;AACA,GALO;;;AAQR,YAAU,kBAAS,GAAT,EAAc;AACvB,OAAI,MAAM,IAAN,CAAW,KAAX,IAAoB,SAAxB,EAAmC,MAAM,IAAI,KAAJ,CAAU,4BAAV,CAAN;AACnC,UAAO,MAAM,IAAN,CAAW,KAAX,CAAiB,GAAjB,CAAP;AACA;AAXO;AA5BO,CAAjB","file":"config/view_helpers.js","sourcesContent":["/**\n * View helper functions\n */\n\nmodule.exports = {\n\t\n\t// expose app config to view\n\tappConfig: function() {\n\t\treturn light.config\n\t},\n\n\t// log debug message\n\tlog: function(m){\n\t\tlight.log.debug(m)\n\t},\n\n\t// extracts the first error message from form validation error object using its parameter name\n\t// example error object: [ { param: 'email', msg: 'Please provide your email.', value: '' } ]\n\tgetFieldErrMsg: function(errors, param) {\n\t\tvar errObj = _.findWhere(errors, { 'param': param });\n\t\tvar msg = _.result(errObj, 'msg');\n\t\treturn (msg) ? msg : '';\n\t},\n\n\t// http helper\n\thttp: {\n\t\tgetReq: function() {\n\t\t\treturn light._req;\n\t\t}\n\t},\n\n\t// session helper (only read-only access)\n\tsession: {\n\t\t\n\t\t// get session data by key\n\t\tget: function(key) {\n\t\t\treturn light._req.session[key];\n\t\t},\n\n\t\t// get flash data by key\n\t\tgetFlash: function(key) {\n\t\t\tif (light._req.flash == undefined) throw new Error(\"flash module not installed\");\n\t\t\treturn light._req.flash(key)\n\t\t}\n\t}\n}"],"sourceRoot":"/source/"}