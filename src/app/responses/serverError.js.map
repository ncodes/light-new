{"version":3,"sources":["responses/serverError.js"],"names":["module","exports","serverError","data","options","req","light","_req","res","_res","status","show","log","error","Error","headers","json","type","message","_","isPlainObject"],"mappings":";;AAAA;;;;;AAKAA,OAAOC,OAAP,GAAiB,SAASC,WAAT,CAAsBC,IAAtB,EAA4BC,OAA5B,EAAqC;;AAElD;AACA,QAAIC,MAAMC,MAAMC,IAAhB;AACA,QAAIC,MAAMF,MAAMG,IAAhB;;AAEAD,QAAIE,MAAJ,CAAW,GAAX;;AAEA,QAAI,CAACP,IAAD,IAAS,CAACC,OAAd,EAAuB;AACnB,eAAOI,IAAIG,IAAJ,CAAS,YAAT,CAAP;AACH;;AAED;AACAL,UAAMM,GAAN,CAAUC,KAAV,CAAgBV,IAAhB;;AAEA;AACA,QAAIA,gBAAgBW,KAApB,EAA2B;;AAEvB,YAAIT,IAAIU,OAAJ,CAAY,cAAZ,KAA+B,kBAAnC,EAAuD;AACnD,mBAAOP,IAAIQ,IAAJ,CAAS;AACZC,sBAAM,WADM;AAEZC,yBAAS;AAFG,aAAT,CAAP;AAIH;;AAED,eAAOV,IAAIG,IAAJ,CAAS,YAAT,CAAP;AACH;;AAED;AACA,QAAIQ,EAAEC,aAAF,CAAgBjB,IAAhB,CAAJ,EAA2B;AACzB,eAAOK,IAAIQ,IAAJ,CAASb,IAAT,CAAP;AACD;AACJ,CAhCD","file":"serverError.js","sourcesContent":["/**\n * Extracted from sails.js\n *\n * 500 (Server Error) Response\n */\nmodule.exports = function serverError (data, options) {\n\n    // Get access to `req`, `res`\n    var req = light._req;\n    var res = light._res;\n\n    res.status(500)\n\n    if (!data && !options) {\n        return res.show('errors/500');\n    }\n\n    // log error\n    light.log.error(data)\n\n    // if error is Error()\n    if (data instanceof Error) {\n\n        if (req.headers['content-type'] == \"application/json\") {\n            return res.json({\n                type: \"api_error\",\n                message: \"something went wrong at our end\"\n            })\n        } \n\n        return res.show('errors/500');\n    }\n\n    // error: json\n    if (_.isPlainObject(data)) { \n      return res.json(data)\n    }\n}\n\n"]}