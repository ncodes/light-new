{"version":3,"sources":["responses/serverError.js"],"names":[],"mappings":";;;;;;;AAKA,OAAO,OAAP,GAAiB,SAAS,WAAT,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;;;AAGlD,QAAI,MAAM,MAAM,IAAhB;AACA,QAAI,MAAM,MAAM,IAAhB;;AAEA,QAAI,MAAJ,CAAW,GAAX;;AAEA,QAAI,CAAC,IAAD,IAAS,CAAC,OAAd,EAAuB;AACnB,eAAO,IAAI,MAAJ,CAAW,UAAX,CAAP;AACH;;;AAGD,UAAM,GAAN,CAAU,KAAV,CAAgB,IAAhB;;;AAGA,QAAI,gBAAgB,KAApB,EAA2B;;AAEvB,YAAI,IAAI,OAAJ,CAAY,cAAZ,KAA+B,kBAAnC,EAAuD;AACnD,mBAAO,IAAI,IAAJ,CAAS;AACZ,sBAAM,WADM;AAEZ,yBAAS;AAFG,aAAT,CAAP;AAIH;;AAED,eAAO,IAAI,MAAJ,CAAW,UAAX,CAAP;AACH;;;AAGD,QAAI,EAAE,aAAF,CAAgB,IAAhB,CAAJ,EAA2B;AACzB,eAAO,IAAI,IAAJ,CAAS,IAAT,CAAP;AACD;AACJ,CAhCD","file":"responses/serverError.js","sourcesContent":["/**\n * Extracted from sails.js\n *\n * 500 (Server Error) Response\n */\nmodule.exports = function serverError (data, options) {\n\n    // Get access to `req`, `res`\n    var req = light._req;\n    var res = light._res;\n\n    res.status(500)\n\n    if (!data && !options) {\n        return res.render('500.html');\n    }\n\n    // log error\n    light.log.error(data)\n\n    // if error is Error()\n    if (data instanceof Error) {\n\n        if (req.headers['content-type'] == \"application/json\") {\n            return res.json({\n                type: \"api_error\",\n                message: \"something went wrong at our end\"\n            })\n        } \n\n        return res.render('500.html');\n    }\n\n    // error: json\n    if (_.isPlainObject(data)) { \n      return res.json(data)\n    }\n}\n\n"],"sourceRoot":"/source/"}